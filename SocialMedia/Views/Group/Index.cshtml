@using Models
@model List<Group?>
@{
    ViewData["Title"] = "Danh sách nhóm của tôi";
}

<main id="site__main" class="2xl:ml-[--w-side] xl:ml-[--w-side-sm] p-2.5 h-[calc(100vh-var(--m-top))] mt-[--m-top]">
    <div class="lg:flex 2xl:gap-16 gap-12 max-w-[1065px] mx-auto" style="background-color:rgb(249, 250, 251)">
        <div class="max-w-[680px] mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Nhóm của tôi</h2>

            <div class="mb-6">
                <a href="/Group/Create" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                    </svg>
                    Tạo nhóm mới
                </a>
            </div>

            @if (Model != null && Model.Any())
            {
                <div class="flex flex-col gap-6">
                    @foreach (var group in Model)
                    {
                        if (group != null)
                        {
                            <div class="bg-white rounded-lg shadow-md overflow-hidden flex items-center">
                                <img src="@(string.IsNullOrEmpty(group.GroupPictureUrl) ? "/images/default_group_image.png" : group.GroupPictureUrl)" alt="Hình ảnh nhóm" class="w-32 h-32 object-cover rounded-l-lg mr-4"> <div class="p-4 flex-grow">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-2">@group.GroupName</h3>
                                    <p class="text-sm text-gray-500 mb-2">
                                        <i class="fas fa-users"></i>
                                        @if (group.IsPrivate)
                                        {
                                            <span class="ml-1 text-red-500">Nhóm riêng tư</span>
                                        }
                                        else
                                        {
                                            <span class="ml-1 text-green-500">Nhóm công khai</span>
                                        }
                                    </p>
                                    <p class="text-xs text-gray-400">Tạo bởi: @group.CreatedByUserId</p>
                                    <p class="text-xs text-gray-400">Ngày tạo: @group.CreatedDate.ToShortDateString()</p>
                                    <a href="/Group/Details/@group.ID" class="mt-4 inline-block text-blue-600 hover:underline">Xem chi tiết</a>
                                </div>
                            </div>
                        }
                    }
                </div>
            }
            else
            {
                <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4" role="alert">
                    <p class="font-bold">Chưa có nhóm nào</p>
                    <p>Bạn chưa tham gia hoặc tạo bất kỳ nhóm nào. Hãy tạo nhóm đầu tiên của bạn!</p>
                </div>
            }
        </div>
    </div>
</main>