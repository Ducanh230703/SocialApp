@using Models.ViewModel.Friend
@model List<Models.ViewModel.Friend.SearchResult>

@{
    var currentQuery = ViewData["SearchQuery"]?.ToString();
}

@if (Model != null && Model.Any())
{
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="search-results-grid">
        @foreach (var result in Model)
        {
            if (result == null) continue;

            <div class="bg-white rounded-xl shadow-sm p-4 flex items-center space-x-4">
                <a href="/User/Details?userId=@(result.ID)">
                    <img src="@(!string.IsNullOrEmpty(result.ProfilePictureUrl)
                                                                      ? result.ProfilePictureUrl
                                                                      : Url.Content("~/images/avatar/user.png"))"
                 alt="@(result.FullName ?? "Người dùng")"
                 class="w-16 h-16 rounded-full object-cover">
        </a>
        <div class="flex-1">
            <a href="/User/Details?userId=@(result.ID)"
               class="text-lg font-semibold text-black hover:underline">
                @(result.FullName ?? "Không rõ tên")
            </a>
        </div>
        <div class="flex-none">
            <a href="/User/Details?userId=@(result.ID)"
               class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm">
                Xem trang cá nhân
            </a>
        </div>
    </div>
        }
    </div>
}
else
{
    <div class="bg-white rounded-xl shadow-sm p-4 text-center text-gray-500">
        @if (!string.IsNullOrEmpty(currentQuery))
        {
            <span>Không tìm thấy kết quả nào cho "@currentQuery".</span>
        }
        else
        {
            <span>Vui lòng nhập từ khóa để tìm kiếm.</span>
        }
    </div>
}